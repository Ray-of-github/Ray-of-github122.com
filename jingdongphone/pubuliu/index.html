<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        *{
            margin: 0px;
            padding: 0px;
            /*text-align: center;*/
        }

        #container{
            position: relative;
            /*left: 50%;*/

        }
        .box{
            padding: 5px;
            float: left;
            background-color: pink;
        }
        .box_img{
            padding: 5px;
            border:1px solid red;
            /*阴影效果*/
            /*box-shadow: 0 0 5px red;*/
            border-radius: 5px;
        }
        .box_img img{
            width: 150px;
            height: auto;
        }
    </style>
</head>
<body>
<div id="container">
    <!--// 用来承载图片的大小-->
    <div class="box">
        <div class="box_img">
            <img src="img/1.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/2.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/3.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/4.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/5.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/6.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/7.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/8.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/9.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/10.jpg">
        </div>
    </div><div class="box">
    <div class="box_img">
        <img src="img/1.jpg">
    </div>
</div>
    <div class="box">
        <div class="box_img">
            <img src="img/2.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/3.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/4.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/5.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/6.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/7.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/8.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/9.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/10.jpg">
        </div>
    </div><div class="box">
    <div class="box_img">
        <img src="img/1.jpg">
    </div>
</div>
    <div class="box">
        <div class="box_img">
            <img src="img/2.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/3.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/4.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/5.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/6.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/7.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/8.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/9.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/10.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/1.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/2.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/3.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/4.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/5.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/6.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/7.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/8.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/9.jpg">
        </div>
    </div>
    <div class="box">
        <div class="box_img">
            <img src="img/10.jpg">
        </div>
    </div>
</div>
<script>
    window.onload = function () {
        var boxs = document.getElementsByClassName("box");

        function imgLocation(parent, content) {
            //container盒子
            var cparent = document.getElementById(parent);
            //图片大盒子们
            var boxs = document.getElementsByClassName("box");
            console.log(boxs.length);
            //拿到一个图片大盒子的宽度
            var boxWidth = boxs[0].offsetWidth;
            var clientWidth = document.documentElement.clientWidth;
            var cols = parseInt(clientWidth / boxWidth);
//                alert(cols);
//                alert(clientWidth);
//                alert(boxWidth);
            cparent.style.width = boxWidth * cols + "px";
            cparent.style.margin = "0 auto";

            var boxHeightArr = [];
            for (var i = 0; i < boxs.length; i++) {
                //摆第一排
                if (i < cols) {

                    boxHeightArr[boxHeightArr.length] = boxs[i].offsetHeight;

                }
//                第二排  第三排  等等
                else {
                    //取出数组中的最小值
                    var minheight = Math.min.apply(null, boxHeightArr);
                    console.log(minheight);
                    var minIndex = getMinHeightLocation(boxHeightArr, minheight);

                    boxs[i].style.position = "absolute";
                    boxs[i].style.top = minheight + "px";
                    boxs[i].style.left = minIndex * boxWidth + "px";
                    boxHeightArr[minIndex] = boxHeightArr[minIndex] + boxs[i].offsetHeight;

                }
            }

        }

        imgLocation("container");

        function getMinHeightLocation(boxHeightarr, minH) {
            for(var i in boxHeightarr){
                if (boxHeightarr[i] == minH){
                    return i;
                }
            }
        }
    }
</script>
</body>
</html>